{
  "hash": "ade34da58b79a705926008f762e3f04b",
  "result": {
    "markdown": "---\ntitle: \"Working Efficiently with Data\"\n---\n\n\n## Reading / writing\n\n### Flat files\n\n### Binary files\n\n-   `RData`\n-   parquet/arrow\n-   `fst/qs`\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(dplyr)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nwrite_dataset <- function(data, format = c(\"csv\", \"csv_readr\", \"csv_dt\", \"csv_arrow\",\n                                           \"parquet\", \"feather\", \"rdata\", \"rds\", \"fst\", \"qs\"),\n                          out_dir = here::here(\"data\", \"write\"),\n                          file_name = \"synth_pop_100000_\") {\n    \n    \n    switch (format,\n            csv = write.csv(data, \n                            file = fs::path(out_dir, \n                                            paste0(file_name, format), \n                                            ext = \"csv\")),\n            csv_readr = readr::write_csv(data, \n                                         file = fs::path(\n                                             out_dir, \n                                             paste0(file_name, format), \n                                             ext = \"csv\")),\n            csv_dt = data.table::fwrite(data, \n                                        file = fs::path(\n                                            out_dir, \n                                            paste0(file_name, format), \n                                            ext = \"csv\")),\n            csv_arrow = arrow::write_csv_arrow(data, \n                                               file = fs::path(\n                                                   out_dir, \n                                                   paste0(file_name, format), \n                                                   ext = \"csv\")),\n            parquet = arrow::write_parquet(data, sink = fs::path(\n                                                   out_dir, \n                                                   paste0(file_name, format), \n                                                   ext = \"parquet\")),\n            feather = arrow::write_feather(data, sink = fs::path(\n                                                   out_dir, \n                                                   paste0(file_name, format), \n                                                   ext = \"arrow\")),\n            rdata = save(data, file = fs::path(out_dir, \n                                                   paste0(file_name, format), \n                                                   ext = \"RData\")),\n            rds = saveRDS(data, file = fs::path(out_dir, \n                                                   paste0(file_name, format), \n                                                   ext = \"rds\")),\n            fst = fst::write_fst(data, path = fs::path(out_dir, \n                                                   paste0(file_name, format), \n                                                   ext = \"fst\")),\n            qs = qs::qsave(data, file = fs::path(out_dir, \n                                                   paste0(file_name, format), \n                                                   ext = \"qs\"))\n            \n            \n    )\n}\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ndata <- readr::read_csv(here::here(\"..\", \"optimise-r-materials\", \"data\",\n                                   \"synthpop_100000.csv\")) \n```\n\n::: {.cell-output .cell-output-stderr}\n```\nRows: 100000 Columns: 12\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (5): sex, agegr, socprof, marital, edu\ndbl (4): age, income, nociga, bmi\nlgl (3): sport, smoke, alcabuse\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n:::\n\n```{.r .cell-code}\nout_dir <- here::here(\"data\", \"write\")\nfs::dir_create(out_dir)\n\n\nbm <- bench::press(\n    format = c(\"csv\", \"csv_readr\", \"csv_dt\", \"csv_arrow\",\n            \"parquet\", \"feather\", \"rdata\", \"rds\", \"fst\", \"qs\"),\n    {\n    bench::mark(\n        write_dataset(data, format = format),\n        relative = FALSE)\n    }\n)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nRunning with:\n   format   \n 1 csv      \n 2 csv_readr\n 3 csv_dt   \n 4 csv_arrow\n 5 parquet  \n 6 feather  \n 7 rdata    \n 8 rds      \n 9 fst      \n10 qs       \n```\n:::\n\n```{.r .cell-code}\nprint_bm <- function(benchmark) {\n    benchmark[, c(\"result\", \"memory\", \"time\", \"gc\")] <- NULL\n    benchmark |>\n        dplyr::arrange(median) |>\n        gt::gt()\n}\n\nprint_bm(bm)\n```\n\n::: {.cell-output-display}\n```{=html}\n<div id=\"xzumnlffbz\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>html {\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;\n}\n\n#xzumnlffbz .gt_table {\n  display: table;\n  border-collapse: collapse;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#xzumnlffbz .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#xzumnlffbz .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#xzumnlffbz .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#xzumnlffbz .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 0;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#xzumnlffbz .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#xzumnlffbz .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#xzumnlffbz .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#xzumnlffbz .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#xzumnlffbz .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#xzumnlffbz .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#xzumnlffbz .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#xzumnlffbz .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#xzumnlffbz .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#xzumnlffbz .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#xzumnlffbz .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#xzumnlffbz .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#xzumnlffbz .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#xzumnlffbz .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#xzumnlffbz .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#xzumnlffbz .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#xzumnlffbz .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#xzumnlffbz .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#xzumnlffbz .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#xzumnlffbz .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#xzumnlffbz .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#xzumnlffbz .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#xzumnlffbz .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#xzumnlffbz .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#xzumnlffbz .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-left: 4px;\n  padding-right: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#xzumnlffbz .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#xzumnlffbz .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#xzumnlffbz .gt_left {\n  text-align: left;\n}\n\n#xzumnlffbz .gt_center {\n  text-align: center;\n}\n\n#xzumnlffbz .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#xzumnlffbz .gt_font_normal {\n  font-weight: normal;\n}\n\n#xzumnlffbz .gt_font_bold {\n  font-weight: bold;\n}\n\n#xzumnlffbz .gt_font_italic {\n  font-style: italic;\n}\n\n#xzumnlffbz .gt_super {\n  font-size: 65%;\n}\n\n#xzumnlffbz .gt_footnote_marks {\n  font-style: italic;\n  font-weight: normal;\n  font-size: 75%;\n  vertical-align: 0.4em;\n}\n\n#xzumnlffbz .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#xzumnlffbz .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#xzumnlffbz .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#xzumnlffbz .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#xzumnlffbz .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#xzumnlffbz .gt_indent_5 {\n  text-indent: 25px;\n}\n</style>\n<table class=\"gt_table\">\n  \n  <thead class=\"gt_col_headings\">\n    <tr>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"expression\">expression</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"format\">format</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"min\">min</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"median\">median</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"itr/sec\">itr/sec</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"mem_alloc\">mem_alloc</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"gc/sec\">gc/sec</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"n_itr\">n_itr</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"n_gc\">n_gc</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"total_time\">total_time</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"expression\" class=\"gt_row gt_center\">write_dataset, data, format</td>\n<td headers=\"format\" class=\"gt_row gt_left\">feather</td>\n<td headers=\"min\" class=\"gt_row gt_center\">16.0ms</td>\n<td headers=\"median\" class=\"gt_row gt_center\">17.9ms</td>\n<td headers=\"itr/sec\" class=\"gt_row gt_right\">55.633991</td>\n<td headers=\"mem_alloc\" class=\"gt_row gt_center\">50.77KB</td>\n<td headers=\"gc/sec\" class=\"gt_row gt_right\">0.000000</td>\n<td headers=\"n_itr\" class=\"gt_row gt_right\">28</td>\n<td headers=\"n_gc\" class=\"gt_row gt_right\">0</td>\n<td headers=\"total_time\" class=\"gt_row gt_center\">503ms</td></tr>\n    <tr><td headers=\"expression\" class=\"gt_row gt_center\">write_dataset, data, format</td>\n<td headers=\"format\" class=\"gt_row gt_left\">csv_readr</td>\n<td headers=\"min\" class=\"gt_row gt_center\">18.9ms</td>\n<td headers=\"median\" class=\"gt_row gt_center\">21.7ms</td>\n<td headers=\"itr/sec\" class=\"gt_row gt_right\">45.441742</td>\n<td headers=\"mem_alloc\" class=\"gt_row gt_center\">112.69KB</td>\n<td headers=\"gc/sec\" class=\"gt_row gt_right\">2.065534</td>\n<td headers=\"n_itr\" class=\"gt_row gt_right\">22</td>\n<td headers=\"n_gc\" class=\"gt_row gt_right\">1</td>\n<td headers=\"total_time\" class=\"gt_row gt_center\">484ms</td></tr>\n    <tr><td headers=\"expression\" class=\"gt_row gt_center\">write_dataset, data, format</td>\n<td headers=\"format\" class=\"gt_row gt_left\">fst</td>\n<td headers=\"min\" class=\"gt_row gt_center\">20.7ms</td>\n<td headers=\"median\" class=\"gt_row gt_center\">22.1ms</td>\n<td headers=\"itr/sec\" class=\"gt_row gt_right\">44.874811</td>\n<td headers=\"mem_alloc\" class=\"gt_row gt_center\">3.54MB</td>\n<td headers=\"gc/sec\" class=\"gt_row gt_right\">0.000000</td>\n<td headers=\"n_itr\" class=\"gt_row gt_right\">23</td>\n<td headers=\"n_gc\" class=\"gt_row gt_right\">0</td>\n<td headers=\"total_time\" class=\"gt_row gt_center\">513ms</td></tr>\n    <tr><td headers=\"expression\" class=\"gt_row gt_center\">write_dataset, data, format</td>\n<td headers=\"format\" class=\"gt_row gt_left\">qs</td>\n<td headers=\"min\" class=\"gt_row gt_center\">29.3ms</td>\n<td headers=\"median\" class=\"gt_row gt_center\">29.9ms</td>\n<td headers=\"itr/sec\" class=\"gt_row gt_right\">33.061357</td>\n<td headers=\"mem_alloc\" class=\"gt_row gt_center\">185.02KB</td>\n<td headers=\"gc/sec\" class=\"gt_row gt_right\">0.000000</td>\n<td headers=\"n_itr\" class=\"gt_row gt_right\">17</td>\n<td headers=\"n_gc\" class=\"gt_row gt_right\">0</td>\n<td headers=\"total_time\" class=\"gt_row gt_center\">514ms</td></tr>\n    <tr><td headers=\"expression\" class=\"gt_row gt_center\">write_dataset, data, format</td>\n<td headers=\"format\" class=\"gt_row gt_left\">csv_dt</td>\n<td headers=\"min\" class=\"gt_row gt_center\">33.4ms</td>\n<td headers=\"median\" class=\"gt_row gt_center\">35.4ms</td>\n<td headers=\"itr/sec\" class=\"gt_row gt_right\">27.802395</td>\n<td headers=\"mem_alloc\" class=\"gt_row gt_center\">1.44MB</td>\n<td headers=\"gc/sec\" class=\"gt_row gt_right\">0.000000</td>\n<td headers=\"n_itr\" class=\"gt_row gt_right\">15</td>\n<td headers=\"n_gc\" class=\"gt_row gt_right\">0</td>\n<td headers=\"total_time\" class=\"gt_row gt_center\">540ms</td></tr>\n    <tr><td headers=\"expression\" class=\"gt_row gt_center\">write_dataset, data, format</td>\n<td headers=\"format\" class=\"gt_row gt_left\">parquet</td>\n<td headers=\"min\" class=\"gt_row gt_center\">38.9ms</td>\n<td headers=\"median\" class=\"gt_row gt_center\">39.9ms</td>\n<td headers=\"itr/sec\" class=\"gt_row gt_right\">25.071635</td>\n<td headers=\"mem_alloc\" class=\"gt_row gt_center\">3.38MB</td>\n<td headers=\"gc/sec\" class=\"gt_row gt_right\">2.089303</td>\n<td headers=\"n_itr\" class=\"gt_row gt_right\">12</td>\n<td headers=\"n_gc\" class=\"gt_row gt_right\">1</td>\n<td headers=\"total_time\" class=\"gt_row gt_center\">479ms</td></tr>\n    <tr><td headers=\"expression\" class=\"gt_row gt_center\">write_dataset, data, format</td>\n<td headers=\"format\" class=\"gt_row gt_left\">csv_arrow</td>\n<td headers=\"min\" class=\"gt_row gt_center\">56.4ms</td>\n<td headers=\"median\" class=\"gt_row gt_center\">58.5ms</td>\n<td headers=\"itr/sec\" class=\"gt_row gt_right\">16.994910</td>\n<td headers=\"mem_alloc\" class=\"gt_row gt_center\">15.54MB</td>\n<td headers=\"gc/sec\" class=\"gt_row gt_right\">0.000000</td>\n<td headers=\"n_itr\" class=\"gt_row gt_right\">9</td>\n<td headers=\"n_gc\" class=\"gt_row gt_right\">0</td>\n<td headers=\"total_time\" class=\"gt_row gt_center\">530ms</td></tr>\n    <tr><td headers=\"expression\" class=\"gt_row gt_center\">write_dataset, data, format</td>\n<td headers=\"format\" class=\"gt_row gt_left\">rdata</td>\n<td headers=\"min\" class=\"gt_row gt_center\">256.7ms</td>\n<td headers=\"median\" class=\"gt_row gt_center\">260.0ms</td>\n<td headers=\"itr/sec\" class=\"gt_row gt_right\">3.845709</td>\n<td headers=\"mem_alloc\" class=\"gt_row gt_center\">8.63KB</td>\n<td headers=\"gc/sec\" class=\"gt_row gt_right\">0.000000</td>\n<td headers=\"n_itr\" class=\"gt_row gt_right\">2</td>\n<td headers=\"n_gc\" class=\"gt_row gt_right\">0</td>\n<td headers=\"total_time\" class=\"gt_row gt_center\">520ms</td></tr>\n    <tr><td headers=\"expression\" class=\"gt_row gt_center\">write_dataset, data, format</td>\n<td headers=\"format\" class=\"gt_row gt_left\">rds</td>\n<td headers=\"min\" class=\"gt_row gt_center\">257.5ms</td>\n<td headers=\"median\" class=\"gt_row gt_center\">261.0ms</td>\n<td headers=\"itr/sec\" class=\"gt_row gt_right\">3.831672</td>\n<td headers=\"mem_alloc\" class=\"gt_row gt_center\">8.63KB</td>\n<td headers=\"gc/sec\" class=\"gt_row gt_right\">0.000000</td>\n<td headers=\"n_itr\" class=\"gt_row gt_right\">2</td>\n<td headers=\"n_gc\" class=\"gt_row gt_right\">0</td>\n<td headers=\"total_time\" class=\"gt_row gt_center\">522ms</td></tr>\n    <tr><td headers=\"expression\" class=\"gt_row gt_center\">write_dataset, data, format</td>\n<td headers=\"format\" class=\"gt_row gt_left\">csv</td>\n<td headers=\"min\" class=\"gt_row gt_center\">288.9ms</td>\n<td headers=\"median\" class=\"gt_row gt_center\">291.0ms</td>\n<td headers=\"itr/sec\" class=\"gt_row gt_right\">3.436955</td>\n<td headers=\"mem_alloc\" class=\"gt_row gt_center\">1.06MB</td>\n<td headers=\"gc/sec\" class=\"gt_row gt_right\">0.000000</td>\n<td headers=\"n_itr\" class=\"gt_row gt_right\">2</td>\n<td headers=\"n_gc\" class=\"gt_row gt_right\">0</td>\n<td headers=\"total_time\" class=\"gt_row gt_center\">582ms</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nread_dataset <- function(data, format = c(\"csv\", \"csv_readr\", \"csv_dt\", \"csv_arrow\",\n                                           \"parquet\", \"feather\", \"rdata\", \"rds\", \"fst\", \"qs\"),\n                          out_dir = here::here(\"data\", \"write\"),\n                          file_name = \"synth_pop_100000_\") {\n    \n    \n    switch (format,\n            csv = read.csv(file = fs::path(out_dir, \n                                            paste0(file_name, format), \n                                            ext = \"csv\")),\n            csv_readr = readr::read_csv(file = fs::path(\n                                             out_dir, \n                                             paste0(file_name, format), \n                                             ext = \"csv\")),\n            csv_dt = data.table::fread(file = fs::path(\n                                            out_dir, \n                                            paste0(file_name, format), \n                                            ext = \"csv\")),\n            csv_arrow = arrow::read_csv_arrow(file = fs::path(\n                                                   out_dir, \n                                                   paste0(file_name, format), \n                                                   ext = \"csv\")),\n            parquet = arrow::read_parquet(file = fs::path(\n                                                   out_dir, \n                                                   paste0(file_name, format), \n                                                   ext = \"parquet\")),\n            feather = arrow::read_feather(file = fs::path(\n                                                   out_dir, \n                                                   paste0(file_name, format), \n                                                   ext = \"arrow\")),\n            rdata = load(file = fs::path(out_dir, \n                                                   paste0(file_name, format), \n                                                   ext = \"RData\")),\n            rds = readRDS(file = fs::path(out_dir, \n                                                   paste0(file_name, format), \n                                                   ext = \"rds\")),\n            fst = fst::read_fst(path = fs::path(out_dir, \n                                                   paste0(file_name, format), \n                                                   ext = \"fst\")),\n            qs = qs::qload(file = fs::path(out_dir, \n                                                   paste0(file_name, format), \n                                                   ext = \"qs\"))\n            \n            \n    )\n}\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ntibble::tibble(file = basename(fs::dir_ls(out_dir)),\n               size = file.size(fs::dir_ls(out_dir))) |>\n    arrange(size) |>\n        mutate(size = gdata::humanReadable(size,\n                                           standard=\"SI\",\n                                           digits=1)) |>\n    gt::gt()\n```\n\n::: {.cell-output-display}\n```{=html}\n<div id=\"idoeubqxlt\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>html {\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;\n}\n\n#idoeubqxlt .gt_table {\n  display: table;\n  border-collapse: collapse;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#idoeubqxlt .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#idoeubqxlt .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#idoeubqxlt .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#idoeubqxlt .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 0;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#idoeubqxlt .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#idoeubqxlt .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#idoeubqxlt .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#idoeubqxlt .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#idoeubqxlt .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#idoeubqxlt .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#idoeubqxlt .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#idoeubqxlt .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#idoeubqxlt .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#idoeubqxlt .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#idoeubqxlt .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#idoeubqxlt .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#idoeubqxlt .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#idoeubqxlt .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#idoeubqxlt .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#idoeubqxlt .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#idoeubqxlt .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#idoeubqxlt .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#idoeubqxlt .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#idoeubqxlt .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#idoeubqxlt .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#idoeubqxlt .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#idoeubqxlt .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#idoeubqxlt .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#idoeubqxlt .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-left: 4px;\n  padding-right: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#idoeubqxlt .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#idoeubqxlt .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#idoeubqxlt .gt_left {\n  text-align: left;\n}\n\n#idoeubqxlt .gt_center {\n  text-align: center;\n}\n\n#idoeubqxlt .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#idoeubqxlt .gt_font_normal {\n  font-weight: normal;\n}\n\n#idoeubqxlt .gt_font_bold {\n  font-weight: bold;\n}\n\n#idoeubqxlt .gt_font_italic {\n  font-style: italic;\n}\n\n#idoeubqxlt .gt_super {\n  font-size: 65%;\n}\n\n#idoeubqxlt .gt_footnote_marks {\n  font-style: italic;\n  font-weight: normal;\n  font-size: 75%;\n  vertical-align: 0.4em;\n}\n\n#idoeubqxlt .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#idoeubqxlt .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#idoeubqxlt .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#idoeubqxlt .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#idoeubqxlt .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#idoeubqxlt .gt_indent_5 {\n  text-indent: 25px;\n}\n</style>\n<table class=\"gt_table\">\n  \n  <thead class=\"gt_col_headings\">\n    <tr>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"file\">file</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"size\">size</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"file\" class=\"gt_row gt_left\">synth_pop_100000_parquet.parquet</td>\n<td headers=\"size\" class=\"gt_row gt_left\">576.8 kB</td></tr>\n    <tr><td headers=\"file\" class=\"gt_row gt_left\">synth_pop_100000_rds.rds</td>\n<td headers=\"size\" class=\"gt_row gt_left\">946.8 kB</td></tr>\n    <tr><td headers=\"file\" class=\"gt_row gt_left\">synth_pop_100000_rdata.RData</td>\n<td headers=\"size\" class=\"gt_row gt_left\">946.8 kB</td></tr>\n    <tr><td headers=\"file\" class=\"gt_row gt_left\">synth_pop_100000_qs.qs</td>\n<td headers=\"size\" class=\"gt_row gt_left\">  1.5 MB</td></tr>\n    <tr><td headers=\"file\" class=\"gt_row gt_left\">synth_pop_100000_fst.fst</td>\n<td headers=\"size\" class=\"gt_row gt_left\">  4.0 MB</td></tr>\n    <tr><td headers=\"file\" class=\"gt_row gt_left\">synth_pop_100000_feather.arrow</td>\n<td headers=\"size\" class=\"gt_row gt_left\">  4.3 MB</td></tr>\n    <tr><td headers=\"file\" class=\"gt_row gt_left\">synth_pop_100000_csv_dt.csv</td>\n<td headers=\"size\" class=\"gt_row gt_left\">  9.7 MB</td></tr>\n    <tr><td headers=\"file\" class=\"gt_row gt_left\">synth_pop_100000_csv_readr.csv</td>\n<td headers=\"size\" class=\"gt_row gt_left\"> 10.1 MB</td></tr>\n    <tr><td headers=\"file\" class=\"gt_row gt_left\">synth_pop_100000_csv_arrow.csv</td>\n<td headers=\"size\" class=\"gt_row gt_left\"> 10.9 MB</td></tr>\n    <tr><td headers=\"file\" class=\"gt_row gt_left\">synth_pop_100000_csv.csv</td>\n<td headers=\"size\" class=\"gt_row gt_left\"> 11.7 MB</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nbm <- bench::press(\n    format = c(\"csv\", \"csv_readr\", \"csv_dt\", \"csv_arrow\",\n            \"parquet\", \"feather\", \"rdata\", \"rds\", \"fst\", \"qs\"),\n    {\n    bench::mark(\n        read_dataset(data, format = format),\n        relative = FALSE)\n    }\n)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: Some expressions had a GC in every iteration; so filtering is disabled.\n```\n:::\n\n```{.r .cell-code}\nprint_bm(bm)\n```\n\n::: {.cell-output-display}\n```{=html}\n<div id=\"muwxfywkpc\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>html {\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;\n}\n\n#muwxfywkpc .gt_table {\n  display: table;\n  border-collapse: collapse;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#muwxfywkpc .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#muwxfywkpc .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#muwxfywkpc .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#muwxfywkpc .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 0;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#muwxfywkpc .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#muwxfywkpc .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#muwxfywkpc .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#muwxfywkpc .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#muwxfywkpc .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#muwxfywkpc .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#muwxfywkpc .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#muwxfywkpc .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#muwxfywkpc .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#muwxfywkpc .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#muwxfywkpc .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#muwxfywkpc .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#muwxfywkpc .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#muwxfywkpc .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#muwxfywkpc .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#muwxfywkpc .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#muwxfywkpc .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#muwxfywkpc .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#muwxfywkpc .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#muwxfywkpc .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#muwxfywkpc .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#muwxfywkpc .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#muwxfywkpc .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#muwxfywkpc .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#muwxfywkpc .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-left: 4px;\n  padding-right: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#muwxfywkpc .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#muwxfywkpc .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#muwxfywkpc .gt_left {\n  text-align: left;\n}\n\n#muwxfywkpc .gt_center {\n  text-align: center;\n}\n\n#muwxfywkpc .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#muwxfywkpc .gt_font_normal {\n  font-weight: normal;\n}\n\n#muwxfywkpc .gt_font_bold {\n  font-weight: bold;\n}\n\n#muwxfywkpc .gt_font_italic {\n  font-style: italic;\n}\n\n#muwxfywkpc .gt_super {\n  font-size: 65%;\n}\n\n#muwxfywkpc .gt_footnote_marks {\n  font-style: italic;\n  font-weight: normal;\n  font-size: 75%;\n  vertical-align: 0.4em;\n}\n\n#muwxfywkpc .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#muwxfywkpc .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#muwxfywkpc .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#muwxfywkpc .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#muwxfywkpc .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#muwxfywkpc .gt_indent_5 {\n  text-indent: 25px;\n}\n</style>\n<table class=\"gt_table\">\n  \n  <thead class=\"gt_col_headings\">\n    <tr>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"expression\">expression</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"format\">format</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"min\">min</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"median\">median</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"itr/sec\">itr/sec</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"mem_alloc\">mem_alloc</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"gc/sec\">gc/sec</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"n_itr\">n_itr</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"n_gc\">n_gc</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"total_time\">total_time</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"expression\" class=\"gt_row gt_center\">read_dataset, data, format</td>\n<td headers=\"format\" class=\"gt_row gt_left\">feather</td>\n<td headers=\"min\" class=\"gt_row gt_center\">2.97ms</td>\n<td headers=\"median\" class=\"gt_row gt_center\">3.17ms</td>\n<td headers=\"itr/sec\" class=\"gt_row gt_right\">308.601977</td>\n<td headers=\"mem_alloc\" class=\"gt_row gt_center\">2.06MB</td>\n<td headers=\"gc/sec\" class=\"gt_row gt_right\">12.344079</td>\n<td headers=\"n_itr\" class=\"gt_row gt_right\">125</td>\n<td headers=\"n_gc\" class=\"gt_row gt_right\">5</td>\n<td headers=\"total_time\" class=\"gt_row gt_center\">405ms</td></tr>\n    <tr><td headers=\"expression\" class=\"gt_row gt_center\">read_dataset, data, format</td>\n<td headers=\"format\" class=\"gt_row gt_left\">parquet</td>\n<td headers=\"min\" class=\"gt_row gt_center\">4.56ms</td>\n<td headers=\"median\" class=\"gt_row gt_center\">5.01ms</td>\n<td headers=\"itr/sec\" class=\"gt_row gt_right\">198.822015</td>\n<td headers=\"mem_alloc\" class=\"gt_row gt_center\">2.62MB</td>\n<td headers=\"gc/sec\" class=\"gt_row gt_right\">10.924287</td>\n<td headers=\"n_itr\" class=\"gt_row gt_right\">91</td>\n<td headers=\"n_gc\" class=\"gt_row gt_right\">5</td>\n<td headers=\"total_time\" class=\"gt_row gt_center\">458ms</td></tr>\n    <tr><td headers=\"expression\" class=\"gt_row gt_center\">read_dataset, data, format</td>\n<td headers=\"format\" class=\"gt_row gt_left\">csv_arrow</td>\n<td headers=\"min\" class=\"gt_row gt_center\">7.49ms</td>\n<td headers=\"median\" class=\"gt_row gt_center\">7.78ms</td>\n<td headers=\"itr/sec\" class=\"gt_row gt_right\">128.075132</td>\n<td headers=\"mem_alloc\" class=\"gt_row gt_center\">6.51MB</td>\n<td headers=\"gc/sec\" class=\"gt_row gt_right\">6.512295</td>\n<td headers=\"n_itr\" class=\"gt_row gt_right\">59</td>\n<td headers=\"n_gc\" class=\"gt_row gt_right\">3</td>\n<td headers=\"total_time\" class=\"gt_row gt_center\">461ms</td></tr>\n    <tr><td headers=\"expression\" class=\"gt_row gt_center\">read_dataset, data, format</td>\n<td headers=\"format\" class=\"gt_row gt_left\">fst</td>\n<td headers=\"min\" class=\"gt_row gt_center\">20.79ms</td>\n<td headers=\"median\" class=\"gt_row gt_center\">21.18ms</td>\n<td headers=\"itr/sec\" class=\"gt_row gt_right\">47.051467</td>\n<td headers=\"mem_alloc\" class=\"gt_row gt_center\">8.06MB</td>\n<td headers=\"gc/sec\" class=\"gt_row gt_right\">13.069852</td>\n<td headers=\"n_itr\" class=\"gt_row gt_right\">18</td>\n<td headers=\"n_gc\" class=\"gt_row gt_right\">5</td>\n<td headers=\"total_time\" class=\"gt_row gt_center\">383ms</td></tr>\n    <tr><td headers=\"expression\" class=\"gt_row gt_center\">read_dataset, data, format</td>\n<td headers=\"format\" class=\"gt_row gt_left\">qs</td>\n<td headers=\"min\" class=\"gt_row gt_center\">25.12ms</td>\n<td headers=\"median\" class=\"gt_row gt_center\">25.54ms</td>\n<td headers=\"itr/sec\" class=\"gt_row gt_right\">39.059213</td>\n<td headers=\"mem_alloc\" class=\"gt_row gt_center\">8.02MB</td>\n<td headers=\"gc/sec\" class=\"gt_row gt_right\">13.949719</td>\n<td headers=\"n_itr\" class=\"gt_row gt_right\">14</td>\n<td headers=\"n_gc\" class=\"gt_row gt_right\">5</td>\n<td headers=\"total_time\" class=\"gt_row gt_center\">358ms</td></tr>\n    <tr><td headers=\"expression\" class=\"gt_row gt_center\">read_dataset, data, format</td>\n<td headers=\"format\" class=\"gt_row gt_left\">csv_dt</td>\n<td headers=\"min\" class=\"gt_row gt_center\">28.26ms</td>\n<td headers=\"median\" class=\"gt_row gt_center\">28.86ms</td>\n<td headers=\"itr/sec\" class=\"gt_row gt_right\">34.663182</td>\n<td headers=\"mem_alloc\" class=\"gt_row gt_center\">9.33MB</td>\n<td headers=\"gc/sec\" class=\"gt_row gt_right\">10.665594</td>\n<td headers=\"n_itr\" class=\"gt_row gt_right\">13</td>\n<td headers=\"n_gc\" class=\"gt_row gt_right\">4</td>\n<td headers=\"total_time\" class=\"gt_row gt_center\">375ms</td></tr>\n    <tr><td headers=\"expression\" class=\"gt_row gt_center\">read_dataset, data, format</td>\n<td headers=\"format\" class=\"gt_row gt_left\">csv_readr</td>\n<td headers=\"min\" class=\"gt_row gt_center\">66.18ms</td>\n<td headers=\"median\" class=\"gt_row gt_center\">68.88ms</td>\n<td headers=\"itr/sec\" class=\"gt_row gt_right\">14.568696</td>\n<td headers=\"mem_alloc\" class=\"gt_row gt_center\">8.27MB</td>\n<td headers=\"gc/sec\" class=\"gt_row gt_right\">10.926522</td>\n<td headers=\"n_itr\" class=\"gt_row gt_right\">4</td>\n<td headers=\"n_gc\" class=\"gt_row gt_right\">3</td>\n<td headers=\"total_time\" class=\"gt_row gt_center\">275ms</td></tr>\n    <tr><td headers=\"expression\" class=\"gt_row gt_center\">read_dataset, data, format</td>\n<td headers=\"format\" class=\"gt_row gt_left\">rdata</td>\n<td headers=\"min\" class=\"gt_row gt_center\">90.75ms</td>\n<td headers=\"median\" class=\"gt_row gt_center\">90.87ms</td>\n<td headers=\"itr/sec\" class=\"gt_row gt_right\">10.943292</td>\n<td headers=\"mem_alloc\" class=\"gt_row gt_center\">8.02MB</td>\n<td headers=\"gc/sec\" class=\"gt_row gt_right\">2.188658</td>\n<td headers=\"n_itr\" class=\"gt_row gt_right\">5</td>\n<td headers=\"n_gc\" class=\"gt_row gt_right\">1</td>\n<td headers=\"total_time\" class=\"gt_row gt_center\">457ms</td></tr>\n    <tr><td headers=\"expression\" class=\"gt_row gt_center\">read_dataset, data, format</td>\n<td headers=\"format\" class=\"gt_row gt_left\">rds</td>\n<td headers=\"min\" class=\"gt_row gt_center\">90.60ms</td>\n<td headers=\"median\" class=\"gt_row gt_center\">91.27ms</td>\n<td headers=\"itr/sec\" class=\"gt_row gt_right\">10.980476</td>\n<td headers=\"mem_alloc\" class=\"gt_row gt_center\">8.01MB</td>\n<td headers=\"gc/sec\" class=\"gt_row gt_right\">2.196095</td>\n<td headers=\"n_itr\" class=\"gt_row gt_right\">5</td>\n<td headers=\"n_gc\" class=\"gt_row gt_right\">1</td>\n<td headers=\"total_time\" class=\"gt_row gt_center\">455ms</td></tr>\n    <tr><td headers=\"expression\" class=\"gt_row gt_center\">read_dataset, data, format</td>\n<td headers=\"format\" class=\"gt_row gt_left\">csv</td>\n<td headers=\"min\" class=\"gt_row gt_center\">277.88ms</td>\n<td headers=\"median\" class=\"gt_row gt_center\">282.25ms</td>\n<td headers=\"itr/sec\" class=\"gt_row gt_right\">3.543007</td>\n<td headers=\"mem_alloc\" class=\"gt_row gt_center\">42.81MB</td>\n<td headers=\"gc/sec\" class=\"gt_row gt_right\">8.857518</td>\n<td headers=\"n_itr\" class=\"gt_row gt_right\">2</td>\n<td headers=\"n_gc\" class=\"gt_row gt_right\">5</td>\n<td headers=\"total_time\" class=\"gt_row gt_center\">564ms</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n:::\n:::\n\n\n## Manipulating\n\n### Matrices & vectors where possible\n\n### Indexing\n\n## Avoid unnecessary pipes\n\n\n::: {.cell}\n\n:::\n\n\n## \n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(dplyr)\nletter_list <- setNames(letters, LETTERS) |>\n    as.list()\n\nbench::mark(\n    magrittr_pipe = {\n        letter_list %>%\n        purrr::pluck(\"D\")\n    },\n    base_r_pipe = {\n        letter_list |>\n        purrr::pluck(\"D\")\n    },\n    purrr_no_pipe = {\n        purrr::pluck(letter_list, \"D\") \n    },\n    base_dollar_idx ={\n        letter_list$D\n    },\n    base_chr_idx ={\n        letter_list[[\"D\"]]\n    },\n    base_int_idx ={\n        letter_list[[4]]\n    },\n    relative = TRUE\n)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 6 × 6\n  expression        min median `itr/sec` mem_alloc `gc/sec`\n  <bch:expr>      <dbl>  <dbl>     <dbl>     <dbl>    <dbl>\n1 magrittr_pipe     Inf 107.        1          Inf      Inf\n2 base_r_pipe       Inf  81.9       1.32       NaN      NaN\n3 purrr_no_pipe     Inf  76.9       1.42       NaN      Inf\n4 base_dollar_idx   Inf   3.00     34.4        NaN      NaN\n5 base_chr_idx      NaN   2.00     56.7        NaN      NaN\n6 base_int_idx      NaN   1        77.4        NaN      NaN\n```\n:::\n:::\n\n\n### Efficient indexing (filtering / selecting)\n\n## `data.table`\n\n\n::: {.cell}\n\n:::\n\n::: {.cell}\n\n:::\n\n::: {.cell}\n\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}